# {{ ansible_managed }}

{% for param in linux_grub_all %}
{%  if (param | type_debug) == 'dict' and 'name' in param %}
{%      set paramName = (linux_grub_entry_prefix | upper) ~ (param.name | upper) %}
{%      if 'value' in param %}
{%          if (param.value | type_debug) == 'list' %}
{%              set inheritCmdlineDefault = param.name | lower == 'cmdline_linux_default' and linux_grub_inherit_cmdline_default | bool %}
{%              set inheritCmdline = param.name | lower == 'cmdline_linux' and linux_grub_inherit_cmdline | bool %}
{%              if inheritCmdlineDefault or inheritCmdline %}
{%                  set paramValPrefix = '$' ~ paramName ~ ' ' %}
{%              else %}
{%                  set paramValPrefix = '' %}
{%              endif %}
{{ paramName }}="{{ paramValPrefix }}{{ param.value | aybarsm.helper.flatten_query('name', 'value', '=', ' ') }}"
{%          else %}
{{ paramName }}="{{ param.value }}"
{%          endif %}
{%      else %}
{{ paramName }}=""
{%      endif %}
{%  endif %}
{% endfor %}