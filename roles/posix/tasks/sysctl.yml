---
# TODO: Implement handlers for sysctl
- name: Deploy posix sysctl settings
  ansible.posix.sysctl:
    name: "{{ item.name }}"
    value: "{{ item.value }}"
    ignoreerrors: "{{ item.ignoreerrors | default(omit) | bool }}"
    reload: "{{ item.reload | default(omit) | bool }}"
    state: "{{ item.state | default(omit) }}"
    sysctl_file: "{{ item.sysctl_file | default(omit) }}"
    sysctl_set: "{{ item.sysctl_set | default(omit) | bool }}"
  loop: "{{ posix__sysctl_all }}"
  register: posix__sysctl_deploy
  when:
    - posix__sysctl_all | type_debug == 'list'
    - posix__sysctl_all | length > 0
